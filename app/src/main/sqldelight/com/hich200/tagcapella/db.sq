
CREATE TABLE tag (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    tag TEXT NOT NULL UNIQUE
);

CREATE INDEX tag_id ON tag (id);

INSERT INTO tag (id, tag) VALUES (0, 'All');

CREATE TABLE song_tag (
    id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    song TEXT NOT NULL,
    tag INTEGER NOT NULL,
    FOREIGN KEY (tag) REFERENCES tag(id) ON DELETE CASCADE,
    UNIQUE (song, tag) ON CONFLICT ABORT
);

CREATE INDEX song_tag_id ON song_tag (id);
